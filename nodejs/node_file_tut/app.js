const sampleData = 
{
  "ipversion": "0",
  "use_ngap": "1",
  "ue_ap_id": "2445900000000001",
  "ue_enb_id": "0",
  "ue_mme_id": "0",
  "e_rab_id": "0",
  "msip": "2",
  "gwip": "",
  "drx": "0",
  "cause_choice": "-1",
  "cause_number": "-1",
  "states": {
        "emm_sublayer_state": "0",
        "deregistered": "0",
        "deregistered_initiated": "0",
        "registered": "0",
        "registered_initiated": "0",
        "tacupdatinginitiated": "0",
        "service_request_initiated": "0"
  },
  "eps_id": "13",
  "sessionid_b1": {
        "number": "1",
        "id": "1",
        "sd": "0",
        "sst": "0",
        "qfi": "0",
        "gtp_teid_in": "1",
        "gtp_teid_out": "1",
        "dnn_net_id": ""
  },
  "sessionid_b2": {
        "number": "2",
        "id": "1",
        "sd": "0",
        "sst": "0",
        "qfi": "0",
        "gtp_teid_in": "1",
        "gtp_teid_out": "1",
        "dnn_net_id": ""
  },
  "sessionid_b3": {
        "number": "3",
        "id": "3",
        "sd": "0",
        "sst": "0",
        "qfi": "0",
        "gtp_teid_in": "1",
        "gtp_teid_out": "1",
        "dnn_net_id": ""
  },
  "sessionid_b4": {
        "number": "4",
        "id": "3",
        "sd": "0",
        "sst": "0",
        "qfi": "0",
        "gtp_teid_in": "1",
        "gtp_teid_out": "1",
        "dnn_net_id": ""
  },
  "sessionid_b5": {
        "number": "5",
        "id": "5",
        "sd": "0",
        "sst": "0",
        "qfi": "0",
        "gtp_teid_in": "1",
        "gtp_teid_out": "1",
        "dnn_net_id": ""
  },
  "sessionid_b6": {
        "number": "6",
        "id": "5",
        "sd": "0",
        "sst": "0",
        "qfi": "0",
        "gtp_teid_in": "1",
        "gtp_teid_out": "1",
        "dnn_net_id": ""
  },
  "sessionid_b7": {
        "number": "7",
        "id": "7",
        "sd": "0",
        "sst": "0",
        "qfi": "0",
        "gtp_teid_in": "1",
        "gtp_teid_out": "1",
        "dnn_net_id": ""
  },
  "sessionid_b8": {
        "number": "8",
        "id": "7",
        "sd": "0",
        "sst": "0",
        "qfi": "0",
        "gtp_teid_in": "1",
        "gtp_teid_out": "1",
        "dnn_net_id": ""
  },
  "sessionid_b9": {
        "number": "9",
        "id": "9",
        "sd": "0",
        "sst": "0",
        "qfi": "0",
        "gtp_teid_in": "1",
        "gtp_teid_out": "1",
        "dnn_net_id": ""
  },
  "sessionid_b10": {
        "number": "10",
        "id": "9",
        "sd": "0",
        "sst": "0",
        "qfi": "0",
        "gtp_teid_in": "1",
        "gtp_teid_out": "1",
        "dnn_net_id": ""
  },
  "sessionid_b11": {
        "number": "11",
        "id": "11",
        "sd": "0",
        "sst": "0",
        "qfi": "0",
        "gtp_teid_in": "1",
        "gtp_teid_out": "1",
        "dnn_net_id": ""
  },
  "sessionid_b12": {
        "number": "12",
        "id": "11",
        "sd": "0",
        "sst": "0",
        "qfi": "0",
        "gtp_teid_in": "1",
        "gtp_teid_out": "1",
        "dnn_net_id": ""
  },
  "sessionid_b13": {
        "number": "13",
        "id": "13",
        "sd": "0",
        "sst": "0",
        "qfi": "0",
        "gtp_teid_in": "1",
        "gtp_teid_out": "1",
        "dnn_net_id": "internet"
  },
  "sessionid_b14": {
        "number": "14",
        "id": "13",
        "sd": "0",
        "sst": "0",
        "qfi": "0",
        "gtp_teid_in": "1",
        "gtp_teid_out": "1",
        "dnn_net_id": ""
  },
  "sessionid_b15": {
        "number": "15",
        "id": "0",
        "sd": "0",
        "sst": "0",
        "qfi": "0",
        "gtp_teid_in": "1",
        "gtp_teid_out": "1",
        "dnn_net_id": ""
  },
  "sessionid_b16": {
        "number": "16",
        "id": "0",
        "sd": "0",
        "sst": "0",
        "qfi": "0",
        "gtp_teid_in": "1",
        "gtp_teid_out": "1",
        "dnn_net_id": ""
  },
  "ngksi": "1",
  "int_algorithm_id": "2",
  "enc_algorithm_id": "0",
  "use_eps_algorithms": "0",
  "Kasme": "B8579F5EDEA2EAC837F1C3866AC8E1D2",
  "RES": "F83A793E5F0B0276",
  "RESstar": "",
  "keyset0": {
        "Knasint": "",
        "Knasenc": "",
        "Krrcint": "",
        "Krrcenc": "",
        "Kupint": "",
        "Kupenc": "",
        "Kausf": "",
        "Kseaf": "",
        "Kamf": "",
        "Kgnb": "",
        "cid": "0"
  },
  "keyset1": {
        "Knasint": "5CD3C1B0CBBE21725F18C93B5B8406B7",
        "Knasenc": "0A3299ACFD9949972B9A79E675FC2A9F",
        "Krrcint": "0223C90B66D31709B5BBB1D7B92D9BDF",
        "Krrcenc": "5499750ABB3061A8E207A3984E2782F5",
        "Kupint": "20399707032DDBBA0B4C1108F6FAEA84",
        "Kupenc": "0484310E55CE0807356C9EFD6CE93B0A",
        "Kausf": "665609DF743ABF57E651E9997D052882",
        "Kseaf": "C5D865946B409E6CE06AF12D454D577E",
        "Kamf": "CC385F4F0C98BA1329987A0E09816FF6",
        "Kgnb": "6080495A26DD0EFCBE9F72BDD3AF3BD9",
        "cid": "1"
  },
  "keyset2": {
        "Knasint": "",
        "Knasenc": "",
        "Krrcint": "",
        "Krrcenc": "",
        "Kupint": "",
        "Kupenc": "",
        "Kausf": "",
        "Kseaf": "",
        "Kamf": "",
        "Kgnb": "",
        "cid": "0"
  },
  "keyset3": {
        "Knasint": "",
        "Knasenc": "",
        "Krrcint": "",
        "Krrcenc": "",
        "Kupint": "",
        "Kupenc": "",
        "Kausf": "",
        "Kseaf": "",
        "Kamf": "",
        "Kgnb": "",
        "cid": "0"
  },
  "keyset4": {
        "Knasint": "",
        "Knasenc": "",
        "Krrcint": "",
        "Krrcenc": "",
        "Kupint": "",
        "Kupenc": "",
        "Kausf": "",
        "Kseaf": "",
        "Kamf": "",
        "Kgnb": "",
        "cid": "0"
  },
  "keyset5": {
        "Knasint": "",
        "Knasenc": "",
        "Krrcint": "",
        "Krrcenc": "",
        "Kupint": "",
        "Kupenc": "",
        "Kausf": "",
        "Kseaf": "",
        "Kamf": "",
        "Kgnb": "",
        "cid": "0"
  },
  "usim": {
        "mcc": "244",
        "mnc": "59",
        "routing_indicator": "1",
        "uplinknascount": "15",
        "downlinknascount": "2",
        "SQN": "64",
        "msin": "0000000001",
        "K": "AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",
        "CK": "",
        "IK": "",
        "OPc": "FF069CFDDE549FDB5F917A5138D36774"
  }
}; 
const data = {
    "Data": [
    {
    "imsi": "999991000000001",
    "msisdn": "999991000000001",
    "k": "000102030405060708090A0B0C0D0E0F",
    "sqn": "000000000000",
    "auth_type": "5G_AKA",
    "groupName": "group1",
    "shared_vn_group_data_Ids": "99999-dudaxu",
    "vn_internal_group_ids": "FdDeCAdb-461-21-ab03Fa"
    },
    {
    "imsi": "999991000000002",
    "msisdn": "999991000000002",
    "k": "000102030405060708090A0B0C0D0E0F",
    "sqn": "000000000000",
    "auth_type": "5G_AKA",
    "groupName": "group1"
    },
    {
    "imsi": "999991000000003",
    "msisdn": "999991000000003",
    "k": "000102030405060708090A0B0C0D0E0F",
    "sqn": "000000000000",
    "auth_type": "5G_AKA",
    "groupName": "group1"
    }
    ],
    "count": 3
    };

const fs = require("fs");
const { resolve } = require("path");

let x; 
data.Data.forEach((element, index) => {


    sampleData.usim.mcc = 99; 
    sampleData.usim.mnc = 999;
    sampleData.k = element.k;
    sampleData.msin = element.imsi;
  
    fs.writeFile("./emulatorr/"+element.imsi+".txt",JSON.stringify(sampleData),function(err){
        if(err){
            console.log(err);
          return;
        }
        console.log(result);
    })
});

console.log("x="+ x);


/** reading filedirectory */

/*
new Promise((rsolve, reject)=>{
      fs.readdir("./emulatorr", function(e, list){
            if(e){
                 reject(e)
            }
            if(list){
                  rsolve(list)
            }
           
      });

}).then(d=>{
      console.log(d)
}).catch(e=>{
      console.log(e);
}).finally(e=>{
      console.log(e);
})

*/